{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[5],{\"2f8c\":function(t,e,s){\"use strict\";s.d(e,\"a\",(function(){return n}));var a=s(\"7424\"),o=s(\"7cf4\"),i=s(\"18d6\");let l=i[\"a\"].getItem(\"pisco-afilweb\");const n={login:async t=>{let e={\"Content-Type\":\"application/json\"},s={username:t.username,password:t.password,subdominio:l.subdomain};return await a[\"a\"].post(o[\"a\"].apiLogin,s,{headers:e}).then((t=>t)).catch((t=>(console.log({err:t}),t.response)))},business:async()=>{let t={\"Content-Type\":\"application/json\"},e={subdominio:l.subdomain};return await a[\"a\"].get(o[\"a\"].apiEmpresa+\"get\",{params:e,headers:t}).then((t=>t)).catch((t=>t.response))}}},\"2fd9\":function(t,e,s){t.exports=s.p+\"img/pisco_logo.8cfd69c3.png\"},\"5b33\":function(t,e,s){\"use strict\";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"full-width row justify-center items-end content-center\"},[a(\"div\",{staticClass:\" q-pa-md\",staticStyle:{width:\"500px\"}},[a(\"q-card\",[a(\"q-card-section\",{staticClass:\"text-center\"},[a(\"q-img\",{staticStyle:{width:\"250px\"},attrs:{src:s(\"2fd9\")}})],1),a(\"q-card-section\",[a(\"q-form\",{ref:\"form_login\"},[a(\"q-input\",{attrs:{filled:\"\",label:\"Usuario\",\"lazy-rules\":\"\",rules:t.loginRules},model:{value:t.username,callback:function(e){t.username=e},expression:\"username\"}}),a(\"q-input\",{attrs:{type:\"password\",filled:\"\",label:\"Contraseña\",\"lazy-rules\":\"\",rules:t.loginRules},model:{value:t.password,callback:function(e){t.password=e},expression:\"password\"}}),a(\"div\",{staticClass:\"flex flex-center col-12 btn-estandar\"},[a(\"q-btn\",{staticClass:\"col-6 btn-primary\",attrs:{label:\"Login\",type:\"button\",rounded:\"\",disable:!t.btnLogin},on:{click:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}}),t.isMobile?a(\"q-btn\",{staticClass:\"btn-optional col-6\",attrs:{label:\"Configuración\",type:\"button\",flat:\"\",to:\"/config\"}}):t._e()],1)],1)],1)],1)],1)])},o=[],i=s(\"7424\"),l=s(\"2f8c\"),n=s(\"4f24\"),r=s(\"bc3a\"),c=s.n(r),u={name:\"login\",data(){return{url:\"@/assets/img/pisco_logo.png\",btnLogin:!0,username:\"devfko\",password:\"12345\",loginRules:[t=>t&&t.length>0||\"Campo Obligatorio (*)\"]}},beforeMount(){this.loadDataConfig();var t=window.location;let e;if(this.isMobile)e=this.$q.localStorage.getItem(\"pisco-afilweb\");else{let s={server:\"http://192.99.247.180:5100\",subdomain:t.host};(this.$q.localStorage.isEmpty=!1)?(this.$q.localStorage.remove(\"pisco-afilweb\"),this.$q.localStorage.set(\"pisco-afilweb\",s)):this.$q.localStorage.set(\"pisco-afilweb\",s),c.a.defaults.baseUrl=this.server,e=this.$q.localStorage.getItem(\"pisco-afilweb\")}null!=e&&(i[\"a\"].baseURL=e.server)},methods:{loadDataConfig(){var t=window.location;let e;if(this.isMobile)e=this.$q.localStorage.getItem(\"pisco-afilweb\");else{let s={server:\"http://192.99.247.180:5100\",subdomain:t.host};(this.$q.localStorage.isEmpty=!1)?(this.$q.localStorage.remove(\"pisco-afilweb\"),this.$q.localStorage.set(\"pisco-afilweb\",s)):this.$q.localStorage.set(\"pisco-afilweb\",s),c.a.defaults.baseUrl=this.server,e=this.$q.localStorage.getItem(\"pisco-afilweb\")}null==e&&(this.btnLogin=!1)},async login(){let t=!0;if(await this.$refs.form_login.validate().then((e=>{e||(t=!1)})),t){this.$q.loading.show({message:\"<span class='text-orange text-weight-bold'>Consultando, por favor espere...</span>\"});let t={username:this.username,password:this.password};await l[\"a\"].login(t).then((t=>{200===(null===t||void 0===t?void 0:t.status)?(this.isAuthenticated=!0,this.user_logged=t.data,this.$router.push({path:\"/home\"}),n[\"a\"].triggerPositive(`Bienvenido, ${t.data.nombre} ${t.data.apellido}`)):n[\"a\"].triggerNegative(\"Usuario incorrecto, no existe o no está configurado correctamente\")})),this.$q.loading.hide()}}},computed:{isMobile:{get(){return this.$store.state.platform_mobile.isMobile},set(t){this.$store.commit(\"platform_mobile/setMobile\",t)}},isAuthenticated:{get(){return this.$store.state.user_authenticated.isAuthenticated},set(t){this.$store.commit(\"user_authenticated/setAuthenticated\",t)}},user_logged:{get(){return this.$store.state.user_authenticated.user_logged},set(t){this.$store.commit(\"user_authenticated/setUserLogged\",t)}}}},d=u,p=s(\"2877\"),g=s(\"f09f\"),h=s(\"a370\"),f=s(\"068f\"),m=s(\"0378\"),b=s(\"27f9\"),w=s(\"9c40\"),v=s(\"eebe\"),$=s.n(v),q=Object(p[\"a\"])(d,a,o,!1,null,null,null);e[\"default\"]=q.exports;$()(q,\"components\",{QCard:g[\"a\"],QCardSection:h[\"a\"],QImg:f[\"a\"],QForm:m[\"a\"],QInput:b[\"a\"],QBtn:w[\"a\"]})}}]);","name":"js/5.70c91423.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[5],{\n\n/***/ \"2f8c\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Security; });\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"7424\");\n/* harmony import */ var _endpoints__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"7cf4\");\n/* harmony import */ var quasar_src_plugins_LocalStorage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"18d6\");\n\n\n;\nlet localStorage = quasar_src_plugins_LocalStorage_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].getItem(\"pisco-afilweb\");\nconst Security = {\n  login: async credentials => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let data = {\n      username: credentials.username,\n      password: credentials.password,\n      subdominio: localStorage.subdomain\n    };\n    return await _api__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].post(_endpoints__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].apiLogin, data, {\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      console.log({\n        err\n      });\n      return err.response;\n    });\n  },\n  business: async () => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let params = {\n      subdominio: localStorage.subdomain\n    };\n    return await _api__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].get(_endpoints__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].apiEmpresa + \"get\", {\n      params,\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  }\n};\n\n/***/ }),\n\n/***/ \"2fd9\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/pisco_logo.8cfd69c3.png\";\n\n/***/ }),\n\n/***/ \"5b33\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/login/Index.vue?vue&type=template&id=2c337536&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"full-width row justify-center items-end content-center\"},[_c('div',{staticClass:\" q-pa-md\",staticStyle:{\"width\":\"500px\"}},[_c('q-card',[_c('q-card-section',{staticClass:\"text-center\"},[_c('q-img',{staticStyle:{\"width\":\"250px\"},attrs:{\"src\":__webpack_require__(\"2fd9\")}})],1),_c('q-card-section',[_c('q-form',{ref:\"form_login\"},[_c('q-input',{attrs:{\"filled\":\"\",\"label\":\"Usuario\",\"lazy-rules\":\"\",\"rules\":_vm.loginRules},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('q-input',{attrs:{\"type\":\"password\",\"filled\":\"\",\"label\":\"Contraseña\",\"lazy-rules\":\"\",\"rules\":_vm.loginRules},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticClass:\"flex flex-center col-12 btn-estandar\"},[_c('q-btn',{staticClass:\"col-6 btn-primary\",attrs:{\"label\":\"Login\",\"type\":\"button\",\"rounded\":\"\",\"disable\":!_vm.btnLogin},on:{\"click\":function($event){$event.preventDefault();return _vm.login.apply(null, arguments)}}}),(_vm.isMobile)?_c('q-btn',{staticClass:\"btn-optional col-6\",attrs:{\"label\":\"Configuración\",\"type\":\"button\",\"flat\":\"\",\"to\":\"/config\"}}):_vm._e()],1)],1)],1)],1)],1)])}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/pages/login/Index.vue?vue&type=template&id=2c337536&\n\n// EXTERNAL MODULE: ./src/services/api.js\nvar api = __webpack_require__(\"7424\");\n\n// EXTERNAL MODULE: ./src/services/http/security.js\nvar security = __webpack_require__(\"2f8c\");\n\n// EXTERNAL MODULE: ./src/services/notify.js\nvar notify = __webpack_require__(\"4f24\");\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"bc3a\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/login/Index.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n //import endpoint from \"src/services/endpoints\";\n\n\n\n/* harmony default export */ var Indexvue_type_script_lang_js_ = ({\n  name: \"login\",\n\n  data() {\n    return {\n      url: \"@/assets/img/pisco_logo.png\",\n      btnLogin: true,\n      username: \"devfko\",\n      password: \"12345\",\n      loginRules: [val => val && val.length > 0 || \"Campo Obligatorio (*)\"]\n    };\n  },\n\n  beforeMount() {\n    this.loadDataConfig();\n    var URLactual = window.location; //alert(URLactual);\n\n    let value;\n\n    if (this.isMobile) {\n      // Se establece la URL de la configuración, para evitar\n      // que tenga que cerrar la App y volver a ingresar\n      value = this.$q.localStorage.getItem(\"pisco-afilweb\");\n    } else {\n      //Guardar la configuración de conexión\n      let dataConfig = {\n        server: \"http://192.99.247.180:5100\",\n        subdomain: URLactual.host\n      }; //probar eliminando local store de pisco-afilweb\n\n      if (this.$q.localStorage.isEmpty = false) {\n        this.$q.localStorage.remove(\"pisco-afilweb\");\n        this.$q.localStorage.set(\"pisco-afilweb\", dataConfig);\n      } else {\n        this.$q.localStorage.set(\"pisco-afilweb\", dataConfig);\n      }\n\n      axios_default.a.defaults.baseUrl = this.server;\n      value = this.$q.localStorage.getItem(\"pisco-afilweb\");\n    }\n\n    if (value != null) {\n      api[\"a\" /* default */].baseURL = value.server;\n    }\n  },\n\n  methods: {\n    loadDataConfig() {\n      var URLactual = window.location; // alert(URLactual);\n\n      let value;\n\n      if (this.isMobile) {\n        // Se establece la URL de la configuración, para evitar\n        // que tenga que cerrar la App y volver a ingresar\n        value = this.$q.localStorage.getItem(\"pisco-afilweb\");\n      } else {\n        //Guardar la configuración de conexión\n        let dataConfig = {\n          server: \"http://192.99.247.180:5100\",\n          subdomain: URLactual.host\n        }; //probar eliminando local store de pisco-afilweb\n\n        if (this.$q.localStorage.isEmpty = false) {\n          this.$q.localStorage.remove(\"pisco-afilweb\");\n          this.$q.localStorage.set(\"pisco-afilweb\", dataConfig);\n        } else {\n          this.$q.localStorage.set(\"pisco-afilweb\", dataConfig);\n        }\n\n        axios_default.a.defaults.baseUrl = this.server;\n        value = this.$q.localStorage.getItem(\"pisco-afilweb\");\n      }\n\n      if (value == null) {\n        // this.triggerNegative(\"No existen parámeros de conexión configurados\");\n        this.btnLogin = false;\n      }\n    },\n\n    async login() {\n      let state = true;\n      await this.$refs.form_login.validate().then(success => {\n        if (!success) {\n          state = false;\n        }\n      });\n\n      if (state) {\n        this.$q.loading.show({\n          message: \"<span class='text-orange text-weight-bold'>Consultando, por favor espere...</span>\"\n        });\n        let credentials = {\n          username: this.username,\n          password: this.password\n        };\n        await security[\"a\" /* Security */].login(credentials).then(response => {\n          if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n            this.isAuthenticated = true;\n            this.user_logged = response.data;\n            this.$router.push({\n              path: \"/home\"\n            });\n            notify[\"a\" /* default */].triggerPositive(`Bienvenido, ${response.data.nombre} ${response.data.apellido}`);\n          } else {\n            notify[\"a\" /* default */].triggerNegative(\"Usuario incorrecto, no existe o no está configurado correctamente\");\n          }\n        });\n        this.$q.loading.hide();\n      }\n    }\n\n  },\n  computed: {\n    isMobile: {\n      //Se captura el valor de la variable isMobile del framework\n      get() {\n        return this.$store.state.platform_mobile.isMobile;\n      },\n\n      set(val) {\n        this.$store.commit(\"platform_mobile/setMobile\", val);\n      }\n\n    },\n    isAuthenticated: {\n      get() {\n        return this.$store.state.user_authenticated.isAuthenticated;\n      },\n\n      set(val) {\n        this.$store.commit(\"user_authenticated/setAuthenticated\", val);\n      }\n\n    },\n    user_logged: {\n      get() {\n        return this.$store.state.user_authenticated.user_logged;\n      },\n\n      set(val) {\n        this.$store.commit(\"user_authenticated/setUserLogged\", val);\n      }\n\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/pages/login/Index.vue?vue&type=script&lang=js&\n /* harmony default export */ var login_Indexvue_type_script_lang_js_ = (Indexvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js\nvar QCard = __webpack_require__(\"f09f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/img/QImg.js + 1 modules\nvar QImg = __webpack_require__(\"068f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/form/QForm.js\nvar QForm = __webpack_require__(\"0378\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js + 1 modules\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/pages/login/Index.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  login_Indexvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var Index = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QCard: QCard[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QImg: QImg[\"a\" /* default */],QForm: QForm[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}