{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[11],{\"59f5\":function(a,e,t){\"use strict\";t.r(e);var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t(\"div\",{staticClass:\"q-pa-md full-width row justify-center content-center\"},[t(\"div\",{staticStyle:{\"min-width\":\"400px\",\"max-width\":\"700px\",padding:\"0 20px\"}},[t(\"q-table\",{attrs:{title:\"Novedades\",\"rows-per-page-label\":\"Items\",separator:\"cell\",data:a.dataTable,columns:a.columns,\"visible-columns\":a.viewColumns,\"row-key\":\"dataTable.id\",\"rows-per-page-options\":a.pagination,loading:a.loadingTable},scopedSlots:a._u([a.isMobile?null:{key:\"top-right\",fn:function(){return[t(\"q-btn\",{attrs:{icon:\"add\",label:\"Agregar Nuevo\",color:\"primary\"},on:{click:a.addItem}})]},proxy:!0},{key:\"header-cell-actions\",fn:function(e){return[t(\"q-th\",{attrs:{props:e}},[t(\"q-icon\",{attrs:{name:\"view_headline\",size:\"1.5em\"}}),a._v(\"\\n          \"+a._s(e.col.label)+\"\\n        \")],1)]}},{key:\"body-cell-actions\",fn:function(e){return[t(\"q-td\",{staticStyle:{width:\"50px\"},attrs:{props:e}},[t(\"q-btn\",{attrs:{dense:\"\",round:\"\",flat:\"\",color:\"positive\",icon:\"edit\"},on:{click:function(t){return a.editItem(e)}}})],1)]}},{key:\"body-cell-estado\",fn:function(e){return[t(\"q-td\",{attrs:{props:e}},[a._v(\"\\n          \"+a._s(a._f(\"FilterState\")(e.row.estado))+\"\\n        \")])]}},{key:\"no-data\",fn:function(){return[t(\"div\",{staticClass:\"full-width row flex-center q-gutter-sm\"},[t(\"span\",[a._v(\" No hay datos . . . crea el primer registro! \")])])]},proxy:!0}],null,!0)})],1),a.isMobile?t(\"div\",{staticClass:\"column items-center\",staticStyle:{\"padding-bottom\":\"0px\"}},[t(\"q-page-sticky\",{attrs:{position:\"bottom-left\",offset:[18,50]}},[t(\"q-btn\",{attrs:{fab:\"\",icon:\"add\",color:\"primary\"},on:{click:a.addItem}})],1)],1):a._e()])},i=[],n=t(\"7424\"),l=t(\"7cf4\"),s=t(\"18d6\");let r,d=s[\"a\"].getItem(\"pisco-afilweb\");const c={list:async()=>{let a={\"Content-Type\":\"application/json\"};r=s[\"a\"].getItem(\"contratoTitular\");let e={subdominio:d.subdomain,idcontrato:r};return await n[\"a\"].get(l[\"a\"].apiNoveltycontract+\"list/\",{params:e,headers:a}).then((a=>a)).catch((a=>a.response))},create:async a=>{let e={\"Content-Type\":\"application/json\"},t={idNovedad:a.idNovedad||0,idContrato:a.idContrato||\"\",fechanovedad:moment(a.fechanovedad).format(),postfechadodia:a.postfechadodia||0,aplicada:a.aplicada||0,fechan:a.fechan||\"1999-01-01\",usuario:a.usuario||\"\",idcobrador:a.idcobrador||\"\",modulo:a.modulo||\"\",transac:a.transac||0,fechaprogramada:a.fechaprogramada||\"1999-01-01\",posicionx:a.posicionx||\"\",posiciony:a.posiciony||\"\",titular:a.titular||\"\",observaciones:a.observaciones||\"\",idalterna:a.idalterna||0,subdominio:d.subdomain};return await n[\"a\"].post(l[\"a\"].apiNoveltycontract+\"create/\",t,{headers:e}).then((a=>a)).catch((a=>a.response))},edit:async(a,e)=>{let t={\"Content-Type\":\"application/json\"},o={idNovedadContrato:a,idNovedad:e.idNovedad||0,idContrato:e.idContrato||\"\",fechanovedad:moment(e.fechanovedad).format(),postfechadodia:e.postfechadodia||0,aplicada:e.aplicada||0,fechan:e.fechan||\"1999-01-01\",usuario:e.usuario||\"\",idcobrador:e.idcobrador||\"\",modulo:e.modulo||\"\",transac:e.transac||0,fechaprogramada:e.fechaprogramada||\"1999-01-01\",posicionx:e.posicionx||\"\",posiciony:e.posiciony||\"\",titular:e.titular||\"\",observaciones:e.observaciones||\"\",idalterna:e.idalterna||0,subdominio:d.subdomain};return await n[\"a\"].put(l[\"a\"].apiNoveltycontract+\"update/\",o,{headers:t}).then((a=>a)).catch((a=>a.response))},get:async a=>{const e={\"Content-Type\":\"application/json\"};let t={id:a,subdominio:d.subdomain};return await n[\"a\"].get(l[\"a\"].apiNoveltycontract+\"get/\",{params:t,headers:e}).then((a=>a)).catch((a=>a.response))}};t(\"6074\");var u=t(\"4f24\"),p=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t(\"q-dialog\",{ref:\"dialog\",on:{hide:a.onDialogHide}},[t(\"q-card\",{staticClass:\"q-dialog-plugin body-cards\"},[t(\"q-card-section\",[t(\"q-form\",{ref:\"form_modal\"},[t(\"q-input\",{attrs:{type:\"text\",filled:\"\",label:\"Nombre del Plan\",\"lazy-rules\":\"\",rules:a.textRules,counter:\"\"},model:{value:a.name,callback:function(e){a.name=e},expression:\"name\"}}),t(\"q-input\",{attrs:{type:\"number\",filled:\"\",label:\"Valor Base\",\"lazy-rules\":\"\",rules:a.numberRules,counter:\"\"},model:{value:a.valorBase,callback:function(e){a.valorBase=e},expression:\"valorBase\"}}),t(\"q-input\",{attrs:{type:\"number\",filled:\"\",label:\"Valor Adicional\",\"lazy-rules\":\"\",rules:a.numberRules,counter:\"\"},model:{value:a.valorAdicional,callback:function(e){a.valorAdicional=e},expression:\"valorAdicional\"}}),t(\"q-toggle\",{attrs:{\"checked-icon\":\"check\",color:\"red\",\"unchecked-icon\":\"clear\",value:a.estado,label:\"Estado del plan \"+a.estadoText},model:{value:a.estado,callback:function(e){a.estado=e},expression:\"estado\"}})],1)],1),t(\"q-card-actions\",{attrs:{align:\"center\"}},[t(\"q-btn\",{attrs:{color:\"primary\",label:a.textAction},on:{click:a.onOKClick}}),t(\"q-btn\",{attrs:{color:\"primary\",flat:\"\",label:\"Cancelar\"},on:{click:a.onCancelClick}})],1)],1)],1)},h=[],m={name:\"ModalNoveltyContract\",data(){return{name:\"\",valorBase:0,valorAdicional:0,estado:!0,estadoText:\"Activo\",textRules:[a=>a&&a.length>0||\"Campo Obligatorio (*)\",a=>a.length<=50||\"Máximo 50 carácteres\"],numberRules:[a=>!isNaN(parseFloat(a))&&a.length>=0||\"Campo Obligatorio (*)\"]}},props:{valueField1:{type:String,required:!0},valueField2:{type:Number,required:!0},valueField3:{type:Number,required:!0},valueField4:{type:Boolean,required:!0},textAction:{type:String,required:!0}},created(){this.name=this.valueField1,this.valorBase=this.valueField2,this.valorAdicional=this.valueField3},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit(\"hide\")},onOKClick(){this.$refs.form_modal.validate().then((a=>{a&&(this.$emit(\"ok\",{name:this.name,valorBase:this.valorBase,valorAdicional:this.valorAdicional,estado:this.estado}),this.hide())}))},onCancelClick(){this.hide()}},watch:{estado(){this.estadoText=this.estado?\"Activo\":\" Inactivo\"}}},v=m,b=t(\"2877\"),f=t(\"24e8\"),g=t(\"f09f\"),y=t(\"a370\"),A=t(\"0378\"),C=t(\"27f9\"),w=t(\"9564\"),q=t(\"4b7e\"),N=t(\"9c40\"),x=t(\"eebe\"),k=t.n(x),F=Object(b[\"a\"])(v,p,h,!1,null,null,null),T=F.exports;k()(F,\"components\",{QDialog:f[\"a\"],QCard:g[\"a\"],QCardSection:y[\"a\"],QForm:A[\"a\"],QInput:C[\"a\"],QToggle:w[\"a\"],QCardActions:q[\"a\"],QBtn:N[\"a\"]});var I=t(\"c1df\"),_=t.n(I);let B;var Q={name:\"NoveltyContract\",data(){return{loadingTable:!1,pagination:[5,10,0],viewColumns:[\"actions\",\"idNovedadContrato\",\"fechanovedad\",\"usuario\",\"observaciones\"],columns:[{name:\"actions\",label:\"\",field:\"\",align:\"center\",icon:\"delete\"},{name:\"idNovedadContrato\",required:!1,label:\"Nro Novedad\",field:\"idNovedadContrato\",sortable:!0,align:\"left\"},{name:\"fechanovedad\",required:!1,label:\"Fecha\",field:\"fechanovedad\",sortable:!0,align:\"left\"},{name:\"usuario\",required:!1,label:\"Usuario\",field:\"usuario\",sortable:!0,align:\"left\"},{name:\"observaciones\",required:!1,label:\"Novedad\",field:\"observaciones\",sortable:!0,align:\"left\"}],dataTable:[],fabAction:!1}},beforeMount(){this.loadData()},methods:{editItem(a){this.fabAction=!1,this.saveOrEditItem(a.row)},addItem(){this.fabAction=!0,this.saveOrEditItem(\"\")},saveOrEditItem(a){this.$q.dialog({component:T,valueField1:this.fabAction?0:a.idNovedad,valueField2:this.fabAction?\"\":a.idContrato,valueField3:this.fabAction?0:a.postfechadodia,valueField4:this.fabAction?0:a.aplicada,valueField5:this.fabAction?\"\":a.fechan,valueField6:this.fabAction?\"\":a.usuario,valueField7:this.fabAction?\"\":a.idcobrador,valueField8:this.fabAction?\"\":a.modulo,valueField9:this.fabAction?0:a.transac,valueField10:this.fabAction?\"\":a.fechaprogramada,valueField11:this.fabAction?\"\":a.posicionx,valueField12:this.fabAction?\"\":a.posiciony,valueField13:this.fabAction?\"\":a.titular,valueField14:this.fabAction?\"\":a.observaciones,valueField15:this.fabAction?0:a.idalterna,parent:this,textAction:this.fabAction?\"Guardar\":\"Modificar\"}).onOk((e=>{this.fabAction?this.addRegister(e):this.editRegister(e,a.id)})).onCancel((()=>{})).onDismiss((()=>{}))},async addRegister(a){await c.create(a).then((a=>{console.log(a),200===(null===a||void 0===a?void 0:a.status)?(u[\"a\"].triggerPositive(\"Registro almacenado correctamente\"),this.loadData()):u[\"a\"].triggerNegative(\"El registro no pudo ser almacenado\")}))},async editRegister(a,e){await c.edit(e,a).then((a=>{console.log(a),200===(null===a||void 0===a?void 0:a.status)?(u[\"a\"].triggerPositive(\"Registro modificado correctamente\"),this.loadData()):u[\"a\"].triggerNegative(\"El registro no pudo ser modificado\")}))},async loadData(){this.loadingTable=!0,B=s[\"a\"].getItem(\"contratoTitular\"),console.log(\"sin novedad \",B),null==B?(localStorage.setItem(\"buscarNovedad\",\"Si\"),this.$router.push({path:\"/search\"})):(this.loadingTable=!0,localStorage.setItem(\"buscarNovedad\",\"No\"),await c.list().then((a=>{if(200===(null===a||void 0===a?void 0:a.status)){for(let e in a.data)a.data[e].fechanovedad=_()(a.data[e].fechanovedad).format(\"YYYY-MMM-DD\");this.dataTable=a.data}}))),this.loadingTable=!1}},computed:{isMobile:{get(){return this.$store.state.platform_mobile.isMobile}}}},S=Q,j=t(\"eaac\"),M=t(\"357e\"),R=t(\"0016\"),D=t(\"db86\"),O=t(\"de5e\"),P=Object(b[\"a\"])(S,o,i,!1,null,null,null);e[\"default\"]=P.exports;k()(P,\"components\",{QTable:j[\"a\"],QBtn:N[\"a\"],QTh:M[\"a\"],QIcon:R[\"a\"],QTd:D[\"a\"],QPageSticky:O[\"a\"]})},6074:function(a,e,t){\"use strict\";t.d(e,\"a\",(function(){return s}));var o=t(\"7424\"),i=t(\"7cf4\"),n=t(\"18d6\");let l=n[\"a\"].getItem(\"pisco-afilweb\");const s={list:async()=>{let a={\"Content-Type\":\"application/json\"},e={subdominio:l.subdomain};return await o[\"a\"].get(i[\"a\"].apiPlan+\"list/\",{params:e,headers:a}).then((a=>a)).catch((a=>a.response))},create:async a=>{let e={\"Content-Type\":\"application/json\"},t={nombrePlan:a.name,valorBase:a.valorBase,valorAdicional:a.valorAdicional,estado:a.estado?0:1,subdominio:l.subdomain};return await o[\"a\"].post(i[\"a\"].apiPlan+\"create/\",t,{headers:e}).then((a=>a)).catch((a=>a.response))},edit:async(a,e)=>{let t={\"Content-Type\":\"application/json\"},n={id:a,nombrePlan:e.name,valorBase:e.valorBase,valorAdicional:e.valorAdicional,estado:e.estado?0:1,subdominio:l.subdomain};return await o[\"a\"].put(i[\"a\"].apiPlan+\"update/\",n,{headers:t}).then((a=>a)).catch((a=>a.response))},get:async a=>{const e={\"Content-Type\":\"application/json\"};let t={id:a,subdominio:l.subdomain};return await o[\"a\"].get(i[\"a\"].apiPlan+\"get/\",{params:t,headers:e}).then((a=>a)).catch((a=>a.response))}}}}]);","name":"js/11.a9bbd431.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[11],{\n\n/***/ \"59f5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/params/noveltycontract/Index.vue?vue&type=template&id=9197b90c&\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"q-pa-md full-width row justify-center content-center\"},[_c('div',{staticStyle:{\"min-width\":\"400px\",\"max-width\":\"700px\",\"padding\":\"0 20px\"}},[_c('q-table',{attrs:{\"title\":\"Novedades\",\"rows-per-page-label\":\"Items\",\"separator\":\"cell\",\"data\":_vm.dataTable,\"columns\":_vm.columns,\"visible-columns\":_vm.viewColumns,\"row-key\":\"dataTable.id\",\"rows-per-page-options\":_vm.pagination,\"loading\":_vm.loadingTable},scopedSlots:_vm._u([(!_vm.isMobile)?{key:\"top-right\",fn:function(){return [_c('q-btn',{attrs:{\"icon\":\"add\",\"label\":\"Agregar Nuevo\",\"color\":\"primary\"},on:{\"click\":_vm.addItem}})]},proxy:true}:null,{key:\"header-cell-actions\",fn:function(props){return [_c('q-th',{attrs:{\"props\":props}},[_c('q-icon',{attrs:{\"name\":\"view_headline\",\"size\":\"1.5em\"}}),_vm._v(\"\\n          \"+_vm._s(props.col.label)+\"\\n        \")],1)]}},{key:\"body-cell-actions\",fn:function(props){return [_c('q-td',{staticStyle:{\"width\":\"50px\"},attrs:{\"props\":props}},[_c('q-btn',{attrs:{\"dense\":\"\",\"round\":\"\",\"flat\":\"\",\"color\":\"positive\",\"icon\":\"edit\"},on:{\"click\":function($event){return _vm.editItem(props)}}})],1)]}},{key:\"body-cell-estado\",fn:function(props){return [_c('q-td',{attrs:{\"props\":props}},[_vm._v(\"\\n          \"+_vm._s(_vm._f(\"FilterState\")(props.row.estado))+\"\\n        \")])]}},{key:\"no-data\",fn:function(){return [_c('div',{staticClass:\"full-width row flex-center q-gutter-sm\"},[_c('span',[_vm._v(\" No hay datos . . . crea el primer registro! \")])])]},proxy:true}],null,true)})],1),(_vm.isMobile)?_c('div',{staticClass:\"column items-center\",staticStyle:{\"padding-bottom\":\"0px\"}},[_c('q-page-sticky',{attrs:{\"position\":\"bottom-left\",\"offset\":[18, 50]}},[_c('q-btn',{attrs:{\"fab\":\"\",\"icon\":\"add\",\"color\":\"primary\"},on:{\"click\":_vm.addItem}})],1)],1):_vm._e()])}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/pages/params/noveltycontract/Index.vue?vue&type=template&id=9197b90c&\n\n// EXTERNAL MODULE: ./src/services/api.js\nvar api = __webpack_require__(\"7424\");\n\n// EXTERNAL MODULE: ./src/services/endpoints.js\nvar endpoints = __webpack_require__(\"7cf4\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/plugins/LocalStorage.js\nvar LocalStorage = __webpack_require__(\"18d6\");\n\n// CONCATENATED MODULE: ./src/services/http/noveltycontract.js\n\n\n;\nlet noveltycontract_localStorage = LocalStorage[\"a\" /* default */].getItem(\"pisco-afilweb\");\nlet localStorageContrato;\nconst Noveltycontract = {\n  list: async () => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    localStorageContrato = LocalStorage[\"a\" /* default */].getItem(\"contratoTitular\");\n    let params = {\n      subdominio: noveltycontract_localStorage.subdomain,\n      idcontrato: localStorageContrato\n    };\n    return await api[\"a\" /* default */].get(endpoints[\"a\" /* default */].apiNoveltycontract + \"list/\", {\n      params,\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  },\n  create: async value => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let data = {\n      idNovedad: value.idNovedad || 0,\n      idContrato: value.idContrato || \"\",\n      fechanovedad: moment(value.fechanovedad).format(),\n      postfechadodia: value.postfechadodia || 0,\n      aplicada: value.aplicada || 0,\n      fechan: value.fechan || \"1999-01-01\",\n      usuario: value.usuario || \"\",\n      idcobrador: value.idcobrador || \"\",\n      modulo: value.modulo || \"\",\n      transac: value.transac || 0,\n      fechaprogramada: value.fechaprogramada || \"1999-01-01\",\n      posicionx: value.posicionx || \"\",\n      posiciony: value.posiciony || \"\",\n      titular: value.titular || \"\",\n      observaciones: value.observaciones || \"\",\n      idalterna: value.idalterna || 0,\n      subdominio: noveltycontract_localStorage.subdomain\n    };\n    return await api[\"a\" /* default */].post(endpoints[\"a\" /* default */].apiNoveltycontract + \"create/\", data, {\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  },\n  edit: async (idNovedadContrato, newData) => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let data = {\n      idNovedadContrato: idNovedadContrato,\n      idNovedad: newData.idNovedad || 0,\n      idContrato: newData.idContrato || \"\",\n      fechanovedad: moment(newData.fechanovedad).format(),\n      postfechadodia: newData.postfechadodia || 0,\n      aplicada: newData.aplicada || 0,\n      fechan: newData.fechan || \"1999-01-01\",\n      usuario: newData.usuario || \"\",\n      idcobrador: newData.idcobrador || \"\",\n      modulo: newData.modulo || \"\",\n      transac: newData.transac || 0,\n      fechaprogramada: newData.fechaprogramada || \"1999-01-01\",\n      posicionx: newData.posicionx || \"\",\n      posiciony: newData.posiciony || \"\",\n      titular: newData.titular || \"\",\n      observaciones: newData.observaciones || \"\",\n      idalterna: newData.idalterna || 0,\n      subdominio: noveltycontract_localStorage.subdomain\n    };\n    return await api[\"a\" /* default */].put(endpoints[\"a\" /* default */].apiNoveltycontract + \"update/\", data, {\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  },\n  get: async idNovedadContrato => {\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let params = {\n      id: idNovedadContrato,\n      subdominio: noveltycontract_localStorage.subdomain\n    };\n    return await api[\"a\" /* default */].get(endpoints[\"a\" /* default */].apiNoveltycontract + \"get/\", {\n      params,\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  }\n};\n// EXTERNAL MODULE: ./src/services/http/plans.js\nvar plans = __webpack_require__(\"6074\");\n\n// EXTERNAL MODULE: ./src/services/notify.js\nvar notify = __webpack_require__(\"4f24\");\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/params/noveltycontract/ModalNoveltyContract.vue?vue&type=template&id=5a8c6614&\nvar ModalNoveltyContractvue_type_template_id_5a8c6614_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-dialog',{ref:\"dialog\",on:{\"hide\":_vm.onDialogHide}},[_c('q-card',{staticClass:\"q-dialog-plugin body-cards\"},[_c('q-card-section',[_c('q-form',{ref:\"form_modal\"},[_c('q-input',{attrs:{\"type\":\"text\",\"filled\":\"\",\"label\":\"Nombre del Plan\",\"lazy-rules\":\"\",\"rules\":_vm.textRules,\"counter\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('q-input',{attrs:{\"type\":\"number\",\"filled\":\"\",\"label\":\"Valor Base\",\"lazy-rules\":\"\",\"rules\":_vm.numberRules,\"counter\":\"\"},model:{value:(_vm.valorBase),callback:function ($$v) {_vm.valorBase=$$v},expression:\"valorBase\"}}),_c('q-input',{attrs:{\"type\":\"number\",\"filled\":\"\",\"label\":\"Valor Adicional\",\"lazy-rules\":\"\",\"rules\":_vm.numberRules,\"counter\":\"\"},model:{value:(_vm.valorAdicional),callback:function ($$v) {_vm.valorAdicional=$$v},expression:\"valorAdicional\"}}),_c('q-toggle',{attrs:{\"checked-icon\":\"check\",\"color\":\"red\",\"unchecked-icon\":\"clear\",\"value\":_vm.estado,\"label\":(\"Estado del plan \" + _vm.estadoText)},model:{value:(_vm.estado),callback:function ($$v) {_vm.estado=$$v},expression:\"estado\"}})],1)],1),_c('q-card-actions',{attrs:{\"align\":\"center\"}},[_c('q-btn',{attrs:{\"color\":\"primary\",\"label\":_vm.textAction},on:{\"click\":_vm.onOKClick}}),_c('q-btn',{attrs:{\"color\":\"primary\",\"flat\":\"\",\"label\":\"Cancelar\"},on:{\"click\":_vm.onCancelClick}})],1)],1)],1)}\nvar ModalNoveltyContractvue_type_template_id_5a8c6614_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./src/pages/params/noveltycontract/ModalNoveltyContract.vue?vue&type=template&id=5a8c6614&\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/params/noveltycontract/ModalNoveltyContract.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n/* harmony default export */ var ModalNoveltyContractvue_type_script_lang_js_ = ({\n  name: \"ModalNoveltyContract\",\n\n  data() {\n    return {\n      name: \"\",\n      valorBase: 0,\n      valorAdicional: 0,\n      estado: true,\n      estadoText: \"Activo\",\n      textRules: [val => val && val.length > 0 || \"Campo Obligatorio (*)\", val => val.length <= 50 || \"Máximo 50 carácteres\"],\n      numberRules: [val => !isNaN(parseFloat(val)) && val.length >= 0 || \"Campo Obligatorio (*)\"]\n    };\n  },\n\n  props: {\n    valueField1: {\n      type: String,\n      required: true\n    },\n    valueField2: {\n      type: Number,\n      required: true\n    },\n    valueField3: {\n      type: Number,\n      required: true\n    },\n    valueField4: {\n      type: Boolean,\n      required: true\n    },\n    textAction: {\n      type: String,\n      required: true\n    }\n  },\n\n  created() {\n    this.name = this.valueField1;\n    this.valorBase = this.valueField2;\n    this.valorAdicional = this.valueField3;\n  },\n\n  methods: {\n    show() {\n      /* this.estado = this.valueField4; */\n      this.$refs.dialog.show();\n    },\n\n    hide() {\n      this.$refs.dialog.hide();\n    },\n\n    onDialogHide() {\n      this.$emit(\"hide\");\n    },\n\n    onOKClick() {\n      this.$refs.form_modal.validate().then(success => {\n        if (success) {\n          this.$emit(\"ok\", {\n            name: this.name,\n            valorBase: this.valorBase,\n            valorAdicional: this.valorAdicional,\n            estado: this.estado\n          });\n          this.hide();\n        }\n      });\n    },\n\n    onCancelClick() {\n      this.hide();\n    }\n\n  },\n  watch: {\n    estado() {\n      this.estadoText = this.estado ? \"Activo\" : \" Inactivo\";\n    }\n\n  }\n});\n// CONCATENATED MODULE: ./src/pages/params/noveltycontract/ModalNoveltyContract.vue?vue&type=script&lang=js&\n /* harmony default export */ var noveltycontract_ModalNoveltyContractvue_type_script_lang_js_ = (ModalNoveltyContractvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/dialog/QDialog.js\nvar QDialog = __webpack_require__(\"24e8\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js\nvar QCard = __webpack_require__(\"f09f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/form/QForm.js\nvar QForm = __webpack_require__(\"0378\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 2 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/toggle/QToggle.js\nvar QToggle = __webpack_require__(\"9564\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardActions.js\nvar QCardActions = __webpack_require__(\"4b7e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js + 1 modules\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/pages/params/noveltycontract/ModalNoveltyContract.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  noveltycontract_ModalNoveltyContractvue_type_script_lang_js_,\n  ModalNoveltyContractvue_type_template_id_5a8c6614_render,\n  ModalNoveltyContractvue_type_template_id_5a8c6614_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ModalNoveltyContract = (component.exports);\n\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QDialog: QDialog[\"a\" /* default */],QCard: QCard[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QForm: QForm[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QToggle: QToggle[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */]});\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment_moment = __webpack_require__(\"c1df\");\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment_moment);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/params/noveltycontract/Index.vue?vue&type=script&lang=js&\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n;\n\n\n\nlet Indexvue_type_script_lang_js_localStorageContrato;\n/* harmony default export */ var Indexvue_type_script_lang_js_ = ({\n  name: \"NoveltyContract\",\n\n  data() {\n    return {\n      loadingTable: false,\n      pagination: [5, 10, 0],\n      viewColumns: [\"actions\", \"idNovedadContrato\", \"fechanovedad\", \"usuario\", \"observaciones\"],\n      columns: [{\n        name: \"actions\",\n        label: \"\",\n        field: \"\",\n        align: \"center\",\n        icon: \"delete\"\n      }, {\n        name: \"idNovedadContrato\",\n        required: false,\n        label: \"Nro Novedad\",\n        field: \"idNovedadContrato\",\n        sortable: true,\n        align: \"left\"\n      }, {\n        name: \"fechanovedad\",\n        required: false,\n        label: \"Fecha\",\n        field: \"fechanovedad\",\n        sortable: true,\n        align: \"left\"\n      }, {\n        name: \"usuario\",\n        required: false,\n        label: \"Usuario\",\n        field: \"usuario\",\n        sortable: true,\n        align: \"left\"\n      }, {\n        name: \"observaciones\",\n        required: false,\n        label: \"Novedad\",\n        field: \"observaciones\",\n        sortable: true,\n        align: \"left\"\n      }],\n      dataTable: [],\n      fabAction: false\n    };\n  },\n\n  beforeMount() {\n    this.loadData();\n  },\n\n  methods: {\n    editItem(props) {\n      this.fabAction = false;\n      this.saveOrEditItem(props.row);\n    },\n\n    addItem() {\n      this.fabAction = true;\n      this.saveOrEditItem(\"\");\n    },\n\n    saveOrEditItem(valueItem) {\n      this.$q.dialog({\n        component: ModalNoveltyContract,\n        valueField1: this.fabAction ? 0 : valueItem.idNovedad,\n        valueField2: this.fabAction ? \"\" : valueItem.idContrato,\n        valueField3: this.fabAction ? 0 : valueItem.postfechadodia,\n        valueField4: this.fabAction ? 0 : valueItem.aplicada,\n        valueField5: this.fabAction ? \"\" : valueItem.fechan,\n        valueField6: this.fabAction ? \"\" : valueItem.usuario,\n        valueField7: this.fabAction ? \"\" : valueItem.idcobrador,\n        valueField8: this.fabAction ? \"\" : valueItem.modulo,\n        valueField9: this.fabAction ? 0 : valueItem.transac,\n        valueField10: this.fabAction ? \"\" : valueItem.fechaprogramada,\n        valueField11: this.fabAction ? \"\" : valueItem.posicionx,\n        valueField12: this.fabAction ? \"\" : valueItem.posiciony,\n        valueField13: this.fabAction ? \"\" : valueItem.titular,\n        valueField14: this.fabAction ? \"\" : valueItem.observaciones,\n        valueField15: this.fabAction ? 0 : valueItem.idalterna,\n        parent: this,\n        textAction: this.fabAction ? \"Guardar\" : \"Modificar\"\n      }).onOk(value => {\n        if (this.fabAction) {\n          this.addRegister(value);\n        } else {\n          this.editRegister(value, valueItem.id);\n        }\n      }).onCancel(() => {// console.log(\"Cancel\");\n      }).onDismiss(() => {// console.log(\"Called on OK or Cancel\");\n      });\n    },\n\n    async addRegister(dataValue) {\n      await Noveltycontract.create(dataValue).then(response => {\n        console.log(response);\n\n        if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n          notify[\"a\" /* default */].triggerPositive(\"Registro almacenado correctamente\");\n          this.loadData();\n        } else {\n          notify[\"a\" /* default */].triggerNegative(\"El registro no pudo ser almacenado\");\n        }\n      });\n    },\n\n    async editRegister(dataValue, idValue) {\n      await Noveltycontract.edit(idValue, dataValue).then(response => {\n        console.log(response);\n\n        if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n          notify[\"a\" /* default */].triggerPositive(\"Registro modificado correctamente\");\n          this.loadData();\n        } else {\n          notify[\"a\" /* default */].triggerNegative(\"El registro no pudo ser modificado\");\n        }\n      });\n    },\n\n    async loadData() {\n      this.loadingTable = true;\n      Indexvue_type_script_lang_js_localStorageContrato = LocalStorage[\"a\" /* default */].getItem(\"contratoTitular\");\n      console.log(\"sin novedad \", Indexvue_type_script_lang_js_localStorageContrato);\n\n      if (Indexvue_type_script_lang_js_localStorageContrato == null) {\n        //se redirecciona a la busqueda del contrato\n        localStorage.setItem(\"buscarNovedad\", \"Si\");\n        this.$router.push({\n          path: \"/search\"\n        });\n      } else {\n        this.loadingTable = true;\n        localStorage.setItem(\"buscarNovedad\", \"No\");\n        await Noveltycontract.list().then(response => {\n          if ((response === null || response === void 0 ? void 0 : response.status) === 200) {\n            for (let index in response.data) {\n              response.data[index].fechanovedad = moment_default()(response.data[index].fechanovedad).format('YYYY-MMM-DD');\n            }\n\n            this.dataTable = response.data;\n          }\n        });\n      }\n\n      this.loadingTable = false;\n    }\n\n  },\n  computed: {\n    isMobile: {\n      get() {\n        return this.$store.state.platform_mobile.isMobile;\n      }\n\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/pages/params/noveltycontract/Index.vue?vue&type=script&lang=js&\n /* harmony default export */ var noveltycontract_Indexvue_type_script_lang_js_ = (Indexvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTable.js + 17 modules\nvar QTable = __webpack_require__(\"eaac\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTh.js\nvar QTh = __webpack_require__(\"357e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js\nvar QIcon = __webpack_require__(\"0016\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/table/QTd.js\nvar QTd = __webpack_require__(\"db86\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/page-sticky/QPageSticky.js\nvar QPageSticky = __webpack_require__(\"de5e\");\n\n// CONCATENATED MODULE: ./src/pages/params/noveltycontract/Index.vue\n\n\n\n\n\n/* normalize component */\n\nvar Index_component = Object(componentNormalizer[\"a\" /* default */])(\n  noveltycontract_Indexvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var Index = __webpack_exports__[\"default\"] = (Index_component.exports);\n\n\n\n\n\n\n\nruntime_auto_import_default()(Index_component, 'components', {QTable: QTable[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QTh: QTh[\"a\" /* default */],QIcon: QIcon[\"a\" /* default */],QTd: QTd[\"a\" /* default */],QPageSticky: QPageSticky[\"a\" /* default */]});\n\n\n/***/ }),\n\n/***/ \"6074\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Plans; });\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"7424\");\n/* harmony import */ var _endpoints__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"7cf4\");\n/* harmony import */ var quasar_src_plugins_LocalStorage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"18d6\");\n\n\n;\nlet localStorage = quasar_src_plugins_LocalStorage_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].getItem(\"pisco-afilweb\");\nconst Plans = {\n  list: async () => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let params = {\n      subdominio: localStorage.subdomain\n    };\n    return await _api__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].get(_endpoints__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].apiPlan + \"list/\", {\n      params,\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  },\n  create: async value => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let data = {\n      nombrePlan: value.name,\n      valorBase: value.valorBase,\n      valorAdicional: value.valorAdicional,\n      estado: value.estado ? 0 : 1,\n      subdominio: localStorage.subdomain\n    };\n    return await _api__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].post(_endpoints__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].apiPlan + \"create/\", data, {\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  },\n  edit: async (id, newData) => {\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let data = {\n      id: id,\n      nombrePlan: newData.name,\n      valorBase: newData.valorBase,\n      valorAdicional: newData.valorAdicional,\n      estado: newData.estado ? 0 : 1,\n      subdominio: localStorage.subdomain\n    };\n    return await _api__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].put(_endpoints__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].apiPlan + \"update/\", data, {\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  },\n  get: async id => {\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let params = {\n      id: id,\n      subdominio: localStorage.subdomain\n    };\n    return await _api__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].get(_endpoints__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].apiPlan + \"get/\", {\n      params,\n      headers\n    }).then(response => {\n      return response;\n    }).catch(err => {\n      return err.response;\n    });\n  }\n};\n\n/***/ })\n\n}]);","inputSourceMap":null}